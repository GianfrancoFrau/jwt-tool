<!DOCTYPE html>
<html lang="it">
  <head>
    <meta charset="utf-8" />
    <title>JWT Tool</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <h1>JWT Encoder / Decoder</h1>

    <div class="tab-bar" role="tablist">
      <button
        class="tab-btn active"
        type="button"
        data-tab="encode"
        role="tab"
        aria-selected="true"
      >
        Encode
      </button>
      <button
        class="tab-btn"
        type="button"
        data-tab="decode"
        role="tab"
        aria-selected="false"
      >
        Decode
      </button>
    </div>

    <div class="tab-panels">
      <section class="tab-panel active" data-panel="encode" role="tabpanel">
        <fieldset>
          <legend>Encode</legend>
          <label for="encode-secret">Secret</label>
          <input
            id="encode-secret"
            type="text"
            placeholder="Inserisci la secret"
            autocomplete="off"
          />

          <label for="encode-payload">Payload (JSON)</label>
          <textarea
            id="encode-payload"
            rows="6"
            placeholder='{"sub": "1234567890", "name": "Mario Rossi"}'
          ></textarea>

          <button id="encode-btn" type="button">Genera token</button>
          <div id="encode-output-block" class="copy-block" hidden>
            <output id="encode-output"></output>
            <button
              type="button"
              class="copy-btn"
              data-copy-target="encode-output"
            >
              Copia
            </button>
          </div>
          <div id="encode-error" class="error" hidden></div>
        </fieldset>
      </section>

      <section class="tab-panel" data-panel="decode" role="tabpanel" hidden>
        <fieldset>
          <legend>Decode</legend>
          <label for="decode-token">Token JWT</label>
          <textarea
            id="decode-token"
            rows="4"
            placeholder="header.payload.signature"
          ></textarea>

          <label for="decode-secret">Secret (opzionale, per verificare)</label>
          <input
            id="decode-secret"
            type="text"
            placeholder="Inserisci la secret"
            autocomplete="off"
          />

          <button id="decode-btn" type="button">Decodifica</button>
          <div id="decode-results" class="decode-results" hidden>
            <div class="row two">
              <div>
                <strong>Header</strong>
                <div id="decoded-header-block" class="copy-block" hidden>
                  <pre id="decoded-header"></pre>
                  <button
                    type="button"
                    class="copy-btn"
                    data-copy-target="decoded-header"
                  >
                    Copia
                  </button>
                </div>
              </div>
              <div>
                <strong>Payload</strong>
                <div id="decoded-payload-block" class="copy-block" hidden>
                  <pre id="decoded-payload"></pre>
                  <button
                    type="button"
                    class="copy-btn"
                    data-copy-target="decoded-payload"
                  >
                    Copia
                  </button>
                </div>
              </div>
            </div>
            <div>
              <strong>Firma valida?</strong>
              <div id="decoded-valid-block" class="copy-block" hidden>
                <output id="decoded-valid"></output>
                <button
                  type="button"
                  class="copy-btn"
                  data-copy-target="decoded-valid"
                >
                  Copia
                </button>
              </div>
            </div>
          </div>
          <div id="decode-error" class="error" hidden></div>
        </fieldset>
      </section>
    </div>
    <script src="script.js"></script>
  </body>
</html>
